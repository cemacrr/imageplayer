var ImagePlayer=function({element:t=null,images:e=[],width:i="",height:l="",interval:n=300,autoplay:s=1,controls:o=1,bgcolor:h="#383838",color:g="#ffffff",closebgcolor:c="rgba(56, 56, 56, 0.5)",closecolor:r="#ffffff",icondir:d="images"}){var a=this;this.element=document.getElementById(t),this._position=this.element.style.position||null,this._width=this.element.style.width||i,this._height=this.element.style.height||l,this._zIndex=this.element.style.zIndex||null,this._top=this.element.style.top||null,this._left=this.element.style.left||null,this._backgroundcolor=this.element.style.backgroundColor||null,this._border=this.element.style.border||null,this._margin=this.element.style.margin||null,this._padding=this.element.style.padding||null,this._paddingtop=this.element.style.paddingTop||null,this._paddingbottom=this.element.style.paddingBottom||null,this._paddingleft=this.element.style.paddingLeft||null,this._paddingright=this.element.style.paddingRight||null,this._fullscreen=!1,this.bgcolor=h,this.color=g,this.closebgcolor=c,this.closecolor=r,this._fsclose=null,this._img=null,this._imgwidth=null,this._imgheight=null,this._imgobjectfit=null,this._imgpaddingtop=null,this._imgpaddingbottom=null,this.images=e,this.length=this.images.length,this._fetched=[],this.index=null,this.prev=null,this.next=null,this.interval=n,this._interval=null,this.autoplay=s,this.controls=o,this._controls=document.createElement("div"),this._controlsheight=35,this._controlpadding=5,this._controlheight=this._controlsheight-2*this._controlpadding,this._controlsplay=null,this._controlsfull=null,this._controlsfirst=null,this._controlslast=null,this._controlsprev=null,this._controlsnext=null,this.icondir=d,this._iconplay=this.icondir+"/play.png",this._iconpause=this.icondir+"/pause.png",this._iconfull=this.icondir+"/full.png",this._iconfirst=this.icondir+"/first.png",this._iconlast=this.icondir+"/last.png",this._iconprev=this.icondir+"/prev.png",this._iconnext=this.icondir+"/next.png",this.state="stopped",this._setIndexes=function(t,e){t.index=e,0==e?(t.prev=t.length-1,t.next=1%t.length):(t.prev=e-1,t.next=(e+1)%t.length)},this.setIndexes=function(t){a._setIndexes(a,t)},this._fetchImages=function(t,e){for(let l of e)if(!t._fetched.includes(l)){var i=new XMLHttpRequest;i.open("GET",t.images[l],!0),i.send(null),t._fetched.push(l)}},this.fetchImages=function(t){a._fetchImages(a,t)},this._setImage=function(t){t._img.src=t.images[t.index]},this.setImage=function(){a._setImage(a)},this._prevImage=function(t){t.setIndexes(t.prev),t.setImage(),t.fetchImages([t.prev])},this.prevImage=function(){a._prevImage(a)},this._nextImage=function(t){t.setIndexes(t.next),t.setImage(),t.fetchImages([t.next])},this.nextImage=function(){a._nextImage(a)},this._firstImage=function(t){t.setIndexes(0),t.setImage()},this.firstImage=function(){a._firstImage(a)},this._lastImage=function(t){t.setIndexes(t.length-1),t.setImage()},this.lastImage=function(){a._lastImage(a)},this._play=function(t){"playing"!=t.state&&(t._interval=setInterval(t.nextImage,t.interval),1==t.controls&&(t._controlsplay.src=t._iconpause,t._controlsplay.removeEventListener("click",t.play),t._controlsplay.addEventListener("click",t.stop),t._controlsfirst.style.visibility="hidden",t._controlsprev.style.visibility="hidden",t._controlsnext.style.visibility="hidden",t._controlslast.style.visibility="hidden"),t.state="playing")},this.play=function(){a._play(a)},this._stop=function(t){"stopped"!=t.state&&(clearInterval(t._interval),1==t.controls&&(t._controlsplay.src=t._iconplay,t._controlsplay.removeEventListener("click",t.stop),t._controlsplay.addEventListener("click",t.play),t._controlsfirst.style.visibility="visible",t._controlsprev.style.visibility="visible",t._controlsnext.style.visibility="visible",t._controlslast.style.visibility="visible"),t.state="stopped")},this.stop=function(){a._stop(a)},this._toggleFullScreenClose=function(t){null==t._fsclose&&(t._fsclose=document.createElement("span"),t.element.appendChild(t._fsclose),t._fsclose.innerHTML="&times;",t._fsclose.style.position="fixed",t._fsclose.style.top="15px",t._fsclose.style.right="15px",t._fsclose.style.color=t.closecolor,t._fsclose.style.backgroundColor=t.closebgcolor,t._fsclose.style.fontSize="xx-large",t._fsclose.style.fontWeight="bold",t._fsclose.style.zIndex=999999,t._fsclose.style.textDecoration="none",t._fsclose.style.cursor="pointer",t._fsclose.style.display="none",t._fsclose.addEventListener("click",t.toggleFullScreen),t._fsclose.addEventListener("mouseover",function(){t._fsclose.style.color="#cccccc"}),t._fsclose.addEventListener("mouseout",function(){t._fsclose.style.color=t.closecolor})),t._fullscreen?t._fsclose.style.display="block":t._fsclose.style.display="none"},this.toggleFullScreenClose=function(){a._toggleFullScreenClose(a)},this._toggleFullScreen=function(t){t._fullscreen?(t.element.style.position=t._position,t.element.style.width=t._width,t.element.style.height=t._height,t.element.style.zIndex=t._zIndex,t.element.style.top=t._top,t.element.style.left=t._left,t.element.style.backgroundColor=t._backgroundcolor,t.element.style.border=t._border,t.element.style.margin=t._margin,t.element.style.padding=t._padding,t.element.style.paddingTop=t._paddingtop,t.element.style.paddingBottom=t._paddingbottom,t.element.style.paddingLeft=t._paddingleft,t.element.style.paddingRight=t._paddingright,t._img.style.maxHeight="calc(100% - "+t._controlsheight+"px)",t._img.style.height=t._imgwidth,t._img.style.width=t._imgheight,t._img.style.objectFit=t._imgobjectfit,t._img.style.paddingTop=t._imgpaddingtop,t._img.style.paddingBottom=t._imgpaddingbottom,t._fullscreen=!1,t.toggleFullScreenClose()):(t.element.style.position="fixed",t.element.style.width="100%",t.element.style.height="100%",t.element.style.zIndex=99999,t.element.style.top=0,t.element.style.left=0,t.element.style.backgroundColor=t.bgcolor,t.element.style.border="0px",t.element.style.margin="auto",t.element.style.padding="0px",t.element.style.paddingTop="0px",t.element.style.paddingBottom="0px",t.element.style.paddingLeft="0px",t.element.style.paddingRight="0px",t._img.style.paddingTop="10px",t._img.style.paddingBottom="10px",t._img.style.maxHeight="calc(90% - "+t._controlsheight+"px - "+t._img.style.paddingTop+" - "+t._img.style.paddingBottom+")",t._img.style.height="90%",t._img.style.width="90%",t._img.style.objectFit="contain",t._fullscreen=!0,t.toggleFullScreenClose())},this.toggleFullScreen=function(){a._toggleFullScreen(a)},this._addControl=function(t,e,i){var l=t._controlpadding+"px",n=t._controlheight+"px",s=document.createElement("img");t._controls.appendChild(s),s.src=e,s.style.cursor="pointer",s.style.padding=l,s.style.height=n;var o=new RegExp(".png$","g"),h=new RegExp("_hover.png$","g");return s.addEventListener("mouseover",function(){s.src=s.src.toString().replace(o,"_hover.png")}),s.addEventListener("mouseout",function(){s.src=s.src.toString().replace(h,".png")}),s.addEventListener("click",i),s},this.addControl=function(t,e){return a._addControl(a,t,e)},this._setControlsWidth=function(t){t._controls.style.width=t._img.width+"px"},this.setControlsWidth=function(){a._setControlsWidth(a)},this._addControls=function(t){t._img.style.maxHeight="calc(100% - "+t._controlsheight+"px)";var e=t._controls;t.element.appendChild(e),e.style.maxWidth="100%",e.style.height=t._controlsheight+"px",e.style.backgroundColor=t.bgcolor,e.style.margin="auto",e.style.overflow="hidden",t._controlsplay=t.addControl(t._iconplay,t.play),t._controlsfull=t.addControl(t._iconfull,t.toggleFullScreen),t._controlsfirst=t.addControl(t._iconfirst,t.firstImage),t._controlsprev=t.addControl(t._iconprev,t.prevImage),t._controlsnext=t.addControl(t._iconnext,t.nextImage),t._controlslast=t.addControl(t._iconlast,t.lastImage)},this.addControls=function(t){a._addControls(a)},this._initPlayer=function(t){t.element.style.textAlign="center",t._img=document.createElement("img"),t.element.appendChild(t._img),t._img.style.maxWidth="100%",t._img.style.maxHeight="100%",t._img.style.margin="auto",t._img.style.display="block",t.setIndexes(0),t.setImage(),t._img.onload=function(){var e=new RegExp("px","g");t._width=t._width.toString().replace(e,""),t._height=t._height.toString().replace(e,""),""==t._width&&""==t._height?(t._width=t._img.width,t._height=t._img.height):""==t._height?t._height=Math.round(t.width/this.width*this.height):""==t._width&&(t._width=Math.round(t._height/this.height*this.width)),1==t.controls&&(t._width=Math.round((t._height-t._controlsheight)/this.height*this.width),t.addControls()),1==t.autoplay?t.play():t.fetchImages([t.prev,t.next]),t._imgwidth=t._img.style.width,t._imgheight=t._img.style.height,t._imgobjectfit=t._img.style.objectFit,t._width=t._width+"px",t._height=t._height+"px",t.element.style.width=t._width,t.element.style.height=t._height,1==t.controls&&t.setControlsWidth(),t._img.onload=null}},this.initPlayer=function(){a._initPlayer(a)},null!=a.element&&a.length>0&&a.initPlayer()};
