var ImagePlayer=function(t){var e=void 0===t.element?null:t.element,i=void 0===t.images?[]:t.images,l=void 0===t.align?"center":t.align,s=void 0===t.width?"":t.width,n=void 0===t.height?"":t.height,o=void 0===t.interval?300:t.interval,r=void 0===t.autoplay?1:t.autoplay,c=void 0===t.control?1:t.controls,h=void 0===t.bgcolor?"#383838":t.bgcolor,g=void 0===t.closebgcolor?"rgba(56, 56, 56, 0.5)":t.closebgcolor,a=void 0===t.closecolor?"#ffffff":t.closecolor,_=void 0===t.icondir?"images":t.icondir,d=this;this.element=document.getElementById(e),this._style={},this._width=this.element.style.width||s,this._height=this.element.style.height||n,this._fullscreen=!1,this._align=l,this.bgcolor=h,this.closebgcolor=g,this.closecolor=a,this._fsclose=null,this._img=null,this._imgstyle={},this.images=i,this.length=this.images.length,this._fetched=[],this.index=null,this.prev=null,this.next=null,this.interval=o,this._interval=null,this.autoplay=r,this.controls=c,this._controls=document.createElement("div"),this._controlsheight=35,this._controlpadding=5,this._controlheight=this._controlsheight-2*this._controlpadding,this._controlsplay=null,this._controlsfull=null,this._controlsfirst=null,this._controlslast=null,this._controlsprev=null,this._controlsnext=null,this.icondir=_,this._iconplay=this.icondir+"/play.png",this._iconpause=this.icondir+"/pause.png",this._iconfull=this.icondir+"/full.png",this._iconfirst=this.icondir+"/first.png",this._iconlast=this.icondir+"/last.png",this._iconprev=this.icondir+"/prev.png",this._iconnext=this.icondir+"/next.png",this.state="stopped",this._setIndexes=function(t,e){0==(t.index=e)?(t.prev=t.length-1,t.next=1%t.length):(t.prev=e-1,t.next=(e+1)%t.length)},this.setIndexes=function(t){d._setIndexes(d,t)},this._fetchImages=function(t,e){for(var i=0;i<e.length;i++)if(-1==t._fetched.indexOf(i)){var l=new XMLHttpRequest;l.open("GET",t.images[i],!0),l.send(null),t._fetched.push(i)}},this.fetchImages=function(t){d._fetchImages(d,t)},this._setImage=function(t){t._img.src=t.images[t.index]},this.setImage=function(){d._setImage(d)},this._prevImage=function(t){t.setIndexes(t.prev),t.setImage(),t.fetchImages([t.prev])},this.prevImage=function(){d._prevImage(d)},this._nextImage=function(t){t.setIndexes(t.next),t.setImage(),t.fetchImages([t.next])},this.nextImage=function(){d._nextImage(d)},this._firstImage=function(t){t.setIndexes(0),t.setImage()},this.firstImage=function(){d._firstImage(d)},this._lastImage=function(t){t.setIndexes(t.length-1),t.setImage()},this.lastImage=function(){d._lastImage(d)},this._play=function(t){"playing"!=t.state&&(t._interval=setInterval(t.nextImage,t.interval),1==t.controls&&(t._controlsplay.src=t._iconpause,t._controlsplay.removeEventListener("click",t.play),t._controlsplay.addEventListener("click",t.stop),t._controlsfirst.style.visibility="hidden",t._controlsprev.style.visibility="hidden",t._controlsnext.style.visibility="hidden",t._controlslast.style.visibility="hidden"),t.state="playing")},this.play=function(){d._play(d)},this._stop=function(t){"stopped"!=t.state&&(clearInterval(t._interval),1==t.controls&&(t._controlsplay.src=t._iconplay,t._controlsplay.removeEventListener("click",t.stop),t._controlsplay.addEventListener("click",t.play),t._controlsfirst.style.visibility="visible",t._controlsprev.style.visibility="visible",t._controlsnext.style.visibility="visible",t._controlslast.style.visibility="visible"),t.state="stopped")},this.stop=function(){d._stop(d)},this._toggleFullScreenClose=function(t){null==t._fsclose&&(t._fsclose=document.createElement("span"),t.element.appendChild(t._fsclose),t._fsclose.innerHTML="&times;",t._fsclose.style.position="fixed",t._fsclose.style.top="15px",t._fsclose.style.right="15px",t._fsclose.style.color=t.closecolor,t._fsclose.style.backgroundColor=t.closebgcolor,t._fsclose.style.fontSize="xx-large",t._fsclose.style.fontWeight="bold",t._fsclose.style.zIndex=999999,t._fsclose.style.textDecoration="none",t._fsclose.style.cursor="pointer",t._fsclose.style.display="none",t._fsclose.addEventListener("click",t.toggleFullScreen),t._fsclose.addEventListener("mouseover",function(){t._fsclose.style.color="#cccccc"}),t._fsclose.addEventListener("mouseout",function(){t._fsclose.style.color=t.closecolor})),t._fullscreen?t._fsclose.style.display="block":t._fsclose.style.display="none"},this.toggleFullScreenClose=function(){d._toggleFullScreenClose(d)},this._toggleFullScreen=function(t){if(t._fullscreen){for(var e in t.element.removeAttribute("style"),t._style)t.element.style[e]=t._style[e];for(var e in t._img.removeAttribute("style"),t._imgstyle)t._img.style[e]=t._imgstyle[e];"left"==t._align?(t._img.style.margin="",t._img.style.marginRight="auto",1==t.controls&&(t._controls.style.margin="",t._controls.style.marginRight="auto")):"right"==t._align&&(t._img.style.margin="",t._img.style.marginLeft="auto",1==t.controls&&(t._controls.style.margin="",t._controls.style.marginLeft="auto")),t.setControlsWidth(),t._fullscreen=!1,t.toggleFullScreenClose()}else t.element.style.position="fixed",t.element.style.width="100%",t.element.style.height="100%",t.element.style.maxWidth="100%",t.element.style.maxHeight="100%",t.element.style.zIndex=99999,t.element.style.top=0,t.element.style.left=0,t.element.style.backgroundColor=t.bgcolor,t.element.style.border="0px",t.element.style.margin="auto",t.element.style.padding="0px",t.element.style.paddingTop="0px",t.element.style.paddingBottom="0px",t.element.style.paddingLeft="0px",t.element.style.paddingRight="0px",t.element.style.alignItems="center",t.element.style.justifyContent="center",t._img.style.paddingTop="10px",t._img.style.paddingBottom="10px",t._img.style.maxHeight="calc(95% - "+t._controlsheight+"px - "+t._img.style.paddingTop+" - "+t._img.style.paddingBottom+")",t._img.style.objectFit="contain",t._img.style.margin="auto",t._img.height>t._img.width?(t._img.style.width="90%",t._img.style.height="auto"):(t._img.style.height="90%",t._img.style.width="auto"),1==t.controls&&(t._controls.style.margin="auto"),t._fullscreen=!0,t.toggleFullScreenClose()},this.toggleFullScreen=function(){d._toggleFullScreen(d)},this._addControl=function(t,e,i){var l=t._controlpadding+"px",s=t._controlheight+"px",n=document.createElement("img");t._controls.appendChild(n),n.src=e,n.style.cursor="pointer",n.style.padding=l,n.style.height=s;var o=new RegExp(".png$","g"),r=new RegExp("_hover.png$","g");return n.addEventListener("mouseover",function(){n.src=n.src.toString().replace(o,"_hover.png")}),n.addEventListener("mouseout",function(){n.src=n.src.toString().replace(r,".png")}),n.addEventListener("click",i),n},this.addControl=function(t,e){return d._addControl(d,t,e)},this._setControlsWidth=function(t){t._controls.style.width=t._img.width+"px"},this.setControlsWidth=function(){d._setControlsWidth(d)},this._addControls=function(t){t._img.style.maxHeight="calc(100% - "+t._controlsheight+"px)";var e=t._controls;t.element.appendChild(e),e.style.maxWidth="100%",e.style.height=t._controlsheight+"px",e.style.backgroundColor=t.bgcolor,e.style.overflow="hidden","left"==t._align?e.style.marginRight="auto":"right"==t._align?e.style.marginLeft="auto":e.style.margin="auto",t._controlsplay=t.addControl(t._iconplay,t.play),t._controlsfull=t.addControl(t._iconfull,t.toggleFullScreen),t._controlsfirst=t.addControl(t._iconfirst,t.firstImage),t._controlsprev=t.addControl(t._iconprev,t.prevImage),t._controlsnext=t.addControl(t._iconnext,t.nextImage),t._controlslast=t.addControl(t._iconlast,t.lastImage)},this.addControls=function(t){d._addControls(d)},this._initPlayer=function(l){l.element.style.textAlign="center",l._img=document.createElement("img"),l.element.appendChild(l._img),l._img.style.maxWidth="100%",l._img.style.maxHeight="100%",l._img.style.display="block","left"==l._align?l._img.style.marginRight="auto":"right"==l._align?l._img.style.marginLeft="auto":l._img.style.margin="auto",l.setIndexes(0),l.setImage(),l._img.onload=function(){var t=new RegExp("px","g");l._width=l._width.toString().replace(t,""),l._height=l._height.toString().replace(t,""),""==l._width&&""==l._height?(l._width=l._img.width,l._height=l._img.height):""==l._height?l._height=Math.round(l.width/this.width*this.height):""==l._width&&(l._width=Math.round(l._height/this.height*this.width)),1==l.controls&&(l._width=Math.round((l._height-l._controlsheight)/this.height*this.width),l.addControls()),1==l.autoplay?l.play():l.fetchImages([l.prev,l.next]);for(var e=0;e<l._img.style.length;e++){var i=l._img.style[e];l._imgstyle[i]=l._img.style[i]}l._width=l._width+"px",l._height=l._height+"px",l.element.style.width=l._width,l.element.style.height=l._height,1==l.controls&&(l.setControlsWidth(),window.addEventListener("resize",l.setControlsWidth));for(e=0;e<l.element.style.length;e++){i=l.element.style[e];l._style[i]=l.element.style[i]}l._img.onload=null}},this.initPlayer=function(){d._initPlayer(d)},null!=d.element&&0<d.length&&d.initPlayer()};
